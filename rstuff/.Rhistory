library(skimr)
ypred <- read_csv("../out_sims/ypred.csv")
ypred <- read_csv("../out_sims/ypred.csv")
library(tidyverse)
ypred <- read_csv("../out_sims/ypred.csv")
loss <- read_csc("../out_sims/loss.csv")
loss <- read_csv("../out_sims/loss.csv")
View(loss)
View(ypred)
install.packags("rjson")
install.packages("rjson")
library(rjson)
metadata <- fromJSON("../out_sims/metadata.json")
?fromJSON
metadata <- fromJSON(file = "../out_sims/metadata.json")
View(metadata)
metadata$name
metadata$date
View(ypred)
View(loss)
ypred %>%
ggplot(aes(x = ypred, y = ypred_val, col = swarm))+
geom_point()
ypred %>%
ggplot(aes(x = ypred, y = ypred_val, col = as.factor(swarm)))+
geom_point()
library(tidyverse)
library(gganimate)
library(gifski)
library(transformr)
library(skimr)
unique_string = "msmall"
data = read_csv(paste0("../out_sims/sim_", unique_string, "_data.csv"), col_names = F)
ypred <- read_csv("../out_sims/ypred.csv")
lossn <- read_csv("../out_sims/loss.csv")
data = read_csv(paste0("../out_sims/sim_", unique_string, "_data.csv"), col_names = F)
loss =  read_csv(paste0("../out_sims/sim_", unique_string, "_loss.csv"), col_names = F)
xy =  read_csv(paste0("../out_sims/sim_", unique_string, "_xy.csv"), col_names = F)
params = read_csv(paste0("../out_sims/sim_", unique_string, "_params.csv"))
View(data)
library(reticulate)
install.packages("reticulate")
library(reticulate)
use_condaenv("torchenv")
basic_hive <- import("../experiments/goofy/basic_hive.py")
source_python("../experiments/goofy.basic_hive.py")
source_python("../experiments/goofy/basic_hive.py")
source_python("../experiments/goofy/basic_hive.py")
source_python("../experiments/goofy/basic_hive.py")
reslist, static_params = basic_hive.main()
output = basic_hive.main()
output = basic_hive()
output = main()
View(output)
reslist <- output$1
reslist <- output[[1]]
static_params <- reslist[[2]]
View(static_params)
adict <- reslist[[1]]
ypred <- adict$results
View(ypred)
yp <- ypred$ypred
params <- adict$params
params$hidden
output <- main()
View(output)
unique_string = "msmall"
data = read_csv(paste0("../out_sims/sim_", unique_string, "_data.csv"), col_names = F)
loss =  read_csv(paste0("../out_sims/sim_", unique_string, "_loss.csv"), col_names = F)
xy =  read_csv(paste0("../out_sims/sim_", unique_string, "_xy.csv"), col_names = F)
params = read_csv(paste0("../out_sims/sim_", unique_string, "_params.csv"))
colnames(xy) <- c("x", "y", "sim_sig")
colnames(data) <- xy %>%
head(length(colnames(data))-2) %>%
pull(x) %>% append(c("bee", "sim_sig"))
colnames(loss) <- c("loss", "bee", "sim_sig")
df_n <- data %>%
group_by(sim_sig) %>%
nest()
xy_n <- xy %>%
group_by(sim_sig) %>%
nest()
colnames(xy_n) <- c("sim_sig", "xy")
df_n <- df_n %>%
left_join(xy_n, by = "sim_sig")
df_n <- df_n %>%
left_join(params, by = "sim_sig")
loss_n <- loss %>%
group_by(sim_sig) %>%
nest()
colnames(loss_n) <- c("sim_sig", "loss")
df_n <- df_n %>%
left_join(loss_n, by = "sim_sig")
df_n <- df_n %>%
mutate(data = data %>% map(~.x %>% group_by(bee) %>% mutate(epoch = row_number()) %>% ungroup())) %>%
mutate(loss = loss %>% map(~.x %>% group_by(bee) %>% mutate(epoch = row_number()) %>% ungroup())) %>%
mutate(long_data = data %>% map(~.x %>% gather(key = "x", value = "y", -bee, -epoch))) %>%
mutate(long_data = long_data %>% map(~.x %>% mutate(x = as.numeric(x))))
df_n
long_data = df_n %>%
select(long_data, funcname, hidden,  width, momentum, lr, sim_sig) %>%
unnest(long_data) %>%
ungroup()
long_data %>% head()
loss = df_n %>%
select(loss, funcname, hidden,  width, momentum, lr, sim_sig) %>%
unnest(loss) %>%
ungroup()
truefunc = long_data %>%
select(x) %>%
unique() %>%
mutate(y = sin(x))
loss %>%
filter(hidden == hidden_layers) %>%
filter(bee < 12) %>%
filter(epoch ==  1) %>%
ggplot(aes(x = bee*6/12-3, y = loss*4-1.5, col = as.factor(bee), shape = as.factor(lr)))+
geom_point(alpha = 0.8)+
geom_line(data = long_data %>% filter(bee < 12) %>% filter(hidden ==hidden_layers) %>% filter(epoch == 1) , aes(x = x, y = y, col = as.factor(bee), linetype = as.factor(lr)), alpha = 0.6, size = 0.7)+
facet_grid(width~momentum)+
scale_y_continuous(limits = c(-1.5,1.5))+
geom_point(data = truefunc, aes(x = x, y = y), col = "black", size = 0.5, shape = 1, alpha = 0.5)
hidden_layers = 2
loss %>%
filter(hidden == hidden_layers) %>%
filter(bee < 12) %>%
filter(epoch ==  1) %>%
ggplot(aes(x = bee*6/12-3, y = loss*4-1.5, col = as.factor(bee), shape = as.factor(lr)))+
geom_point(alpha = 0.8)+
geom_line(data = long_data %>% filter(bee < 12) %>% filter(hidden ==hidden_layers) %>% filter(epoch == 1) , aes(x = x, y = y, col = as.factor(bee), linetype = as.factor(lr)), alpha = 0.6, size = 0.7)+
facet_grid(width~momentum)+
scale_y_continuous(limits = c(-1.5,1.5))+
geom_point(data = truefunc, aes(x = x, y = y), col = "black", size = 0.5, shape = 1, alpha = 0.5)
hidden_layers = 3
loss %>%
filter(hidden == hidden_layers) %>%
filter(bee < 12) %>%
filter(epoch ==  1) %>%
ggplot(aes(x = bee*6/12-3, y = loss*4-1.5, col = as.factor(bee), shape = as.factor(lr)))+
geom_point(alpha = 0.8)+
geom_line(data = long_data %>% filter(bee < 12) %>% filter(hidden ==hidden_layers) %>% filter(epoch == 1) , aes(x = x, y = y, col = as.factor(bee), linetype = as.factor(lr)), alpha = 0.6, size = 0.7)+
facet_grid(width~momentum)+
scale_y_continuous(limits = c(-1.5,1.5))+
geom_point(data = truefunc, aes(x = x, y = y), col = "black", size = 0.5, shape = 1, alpha = 0.5)
hidden_layers = 1
loss %>%
filter(hidden == hidden_layers) %>%
filter(bee < 12) %>%
filter(epoch ==  1) %>%
ggplot(aes(x = bee*6/12-3, y = loss*4-1.5, col = as.factor(bee), shape = as.factor(lr)))+
geom_point(alpha = 0.8)+
geom_line(data = long_data %>% filter(bee < 12) %>% filter(hidden ==hidden_layers) %>% filter(epoch == 1) , aes(x = x, y = y, col = as.factor(bee), linetype = as.factor(lr)), alpha = 0.6, size = 0.7)+
facet_grid(width~momentum)+
scale_y_continuous(limits = c(-1.5,1.5))+
geom_point(data = truefunc, aes(x = x, y = y), col = "black", size = 0.5, shape = 1, alpha = 0.5)
long_data$hidden %>% unique()
hidden_layers = 2
loss %>%
filter(hidden == hidden_layers) %>%
filter(bee < 12) %>%
filter(epoch ==  100) %>%
ggplot(aes(x = bee*6/12-3, y = loss*4-1.5, col = as.factor(bee), shape = as.factor(lr)))+
geom_point(alpha = 0.8)+
geom_line(data = long_data %>% filter(bee < 12) %>% filter(hidden ==hidden_layers) %>% filter(epoch == 1) , aes(x = x, y = y, col = as.factor(bee), linetype = as.factor(lr)), alpha = 0.6, size = 0.7)+
facet_grid(width~momentum)+
scale_y_continuous(limits = c(-1.5,1.5))+
geom_point(data = truefunc, aes(x = x, y = y), col = "black", size = 0.5, shape = 1, alpha = 0.5)
loss %>%
filter(hidden == hidden_layers) %>%
filter(bee < 12) %>%
filter(epoch ==  100) %>%
ggplot(aes(x = bee*6/12-3, y = loss*4-1.5, col = as.factor(bee), shape = as.factor(lr)))+
geom_point(alpha = 0.8)+
geom_line(data = long_data %>% filter(bee < 12) %>% filter(hidden ==hidden_layers) %>% filter(epoch == 100) , aes(x = x, y = y, col = as.factor(bee), linetype = as.factor(lr)), alpha = 0.6, size = 0.7)+
facet_grid(width~momentum)+
scale_y_continuous(limits = c(-1.5,1.5))+
geom_point(data = truefunc, aes(x = x, y = y), col = "black", size = 0.5, shape = 1, alpha = 0.5)
View(params)
View(data)
View(loss)
loss =  read_csv(paste0("../out_sims/sim_", unique_string, "_loss.csv"), col_names = F)
View(loss)
View(xy)
unique_string = "msmall"
data = read_csv(paste0("../out_sims/sim_", unique_string, "_data.csv"), col_names = F)
loss =  read_csv(paste0("../out_sims/sim_", unique_string, "_loss.csv"), col_names = F)
xy =  read_csv(paste0("../out_sims/sim_", unique_string, "_xy.csv"), col_names = F)
params = read_csv(paste0("../out_sims/sim_", unique_string, "_params.csv"))
colnames(xy) <- c("x", "y", "sim_sig")
colnames(data) <- xy %>%
head(length(colnames(data))-2) %>%
pull(x) %>% append(c("bee", "sim_sig"))
colnames(loss) <- c("loss", "bee", "sim_sig")
df_n <- data %>%
group_by(sim_sig) %>%
nest()
df_n
xy_n <- xy %>%
group_by(sim_sig) %>%
nest()
xy_n
colnames(xy_n) <- c("sim_sig", "xy")
df_n <- df_n %>%
left_join(xy_n, by = "sim_sig")
df_n
df_n <- df_n %>%
left_join(params, by = "sim_sig")
df_n
loss_n <- loss %>%
group_by(sim_sig) %>%
nest()
colnames(loss_n) <- c("sim_sig", "loss")
df_n <- df_n %>%
left_join(loss_n, by = "sim_sig")
df_n <- df_n %>%
mutate(data = data %>% map(~.x %>% group_by(bee) %>% mutate(epoch = row_number()) %>% ungroup())) %>%
mutate(loss = loss %>% map(~.x %>% group_by(bee) %>% mutate(epoch = row_number()) %>% ungroup())) %>%
mutate(long_data = data %>% map(~.x %>% gather(key = "x", value = "y", -bee, -epoch))) %>%
mutate(long_data = long_data %>% map(~.x %>% mutate(x = as.numeric(x))))
long_data = df_n %>%
select(long_data, funcname, hidden,  width, momentum, lr, sim_sig) %>%
unnest(long_data) %>%
ungroup()
long_data %>% head()
object.size((long_data))
df_n
df_n$long_data[[0]]
df_n$long_data[1]
object.size(df_n)
object.size(df_n %>% select(-long_data))
data = read_csv(paste0("../out_sims/sim_", unique_string, "_data.csv"), col_names = F)
View(data)
